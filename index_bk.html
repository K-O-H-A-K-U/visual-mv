<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Contrail+One" rel="stylesheet">
    <title>LoudRock</title>
</head>
<body>
    <section>
        <div class="lpimg"></div>
    </section>
    <section>
        <div class="lpdesc">
            <p class="artist">- Loud Rock -</p>
            <p class="title">This is Wasei Eigo</p>
        </div>
    </section>
    <canvas id="canvas" width="600" height="300"></canvas>
    <script>

     window.onload = function() {
        // Canvas未サポート対応
        if (!window.HTMLCanvasElement) return;
        var canvas = document.querySelector('#canvas');
        var ctx = canvas.getContext('2d');

        // canvasのwidthとheightを保存する変数
        let w = ctx.canvas.width = window.innerWidth;
        let h = ctx.canvas.height = window.innerHeight;

        // Particles settings
        var radius = 1.5;
        var number = 100;
        var particles = [];

        var Particle = function(ctx, x, y, speedx, speedy) {
            this.ctx = ctx;
            this.x = x;
            this.y = y;
            this.speedx = speedx;
            this.speedy = speedy;
        }

        function random(min, max) {
            let rand = Math.floor((min + (max - min + 1) * Math.random()));
            return rand;
        }
        
        //drow
        Particle.prototype.draw = function() { 
            ctx = this.ctx;
            ctx.beginPath();
            ctx.fillStyle = 'white';
            ctx.arc(this.x, this.y, radius, 0, Math.PI*2.0, true);
            ctx.fill();
            ctx.closePath();
        }

        //move
        Particle.prototype.move = function(){ 
            //potitionX = potitionX + speedx
            this.x +=this.speedx;
            this.y +=this.speedy;
            
            // if(this.x < radius || this.x > w-radius){
            //     this.speedx *= -1;
            // }
            
            // if(this.y < radius || this.y > h-radius){
            //     this.speedy *= -1;
            // }
        }

        Particle.prototype.render = function(){
            this.draw();
            this.move();
        }

        for (var i = 0; i < number; i++) { //パーティクルインスタンスを30個生成し配列に格納
            // positionX = 500;
            // positionY = 200;
            positionX = random(0, w);
            positionY = random(-h, 0);
            speedx = Math.random()*10-5; //-5から5の間をランダムに生成
            speedy = Math.random()*10-5;
            particle = new Particle(ctx, positionX, positionY, speedx, speedy); //インスタンスを生成
            particles.push(particle); //生成したパーティクルを配列に格納
        }

        function loop() {
            ctx.clearRect(0 ,0, canvas.width, canvas.height); //キャンバス上の図形をクリアにする
            
            particles.forEach(function (e) { //格納されたparticles配列の各要素を実行
                e.render();
            });
    
            requestAnimationFrame(loop);
        }
        
        loop();
    };
    </script>
</body>
</html>