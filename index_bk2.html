<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Contrail+One" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/89/three.min.js"></script>
    <title>LoudRock</title>
</head>
<body>
    <section>
        <div class="lpimg"></div>
    </section>
    <section>
        <div class="lpdesc">
            <p class="artist">- Loud Rock -</p>
            <p class="title">This is Wasei Eigo</p>
        </div>
    </section>
    <canvas id="canvas" width="600" height="300"></canvas>
    <canvas id="myCanvas"></canvas>
    <script>

    //  window.onload = function() {
    //     // Canvas未サポート対応
    //     if (!window.HTMLCanvasElement) return;
    //     var canvas = document.querySelector('#canvas');
    //     var ctx = canvas.getContext('2d');

    //     // canvasのwidthとheightを保存する変数
    //     let w = ctx.canvas.width = window.innerWidth;
    //     let h = ctx.canvas.height = window.innerHeight;

    //     // Particles settings
    //     var number = 100;
    //     var particles = [];

    //     function random(min, max) {
    //         let ans = Math.floor((min + (max - min + 1) * Math.random()));
    //         return ans;
    //     }

    //     function Particle() {
    //         this.x = random(0, w);
    //         this.y = random(0, h);
    //         this.radius = random(2, 6);
    //         this.speedx = random(-2.0, 2.0);
    //         this.speedy = random(1.0, 1.5);
    //     }
        
    //     //drow
    //     Particle.prototype.draw = function() { 
    //         ctx.beginPath();
    //         ctx.globalAlpha = 0.5;
    //         ctx.fillStyle = 'white';
    //         //ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2.0, true);
    //         ctx.rect(this.x, this.y, this.radius, this.radius)
    //         ctx.fill();
    //         ctx.closePath();
    //     }

    //     //move
    //     Particle.prototype.move = function(){ 
    //         this.x +=this.speedx;
    //         this.y -=this.speedy;
    //         if (this.y < 0) {
    //             this.x = random(0, w);
    //             this.y = h;
    //         }
    //     }

    //     function createParticle(count) {
    //         for (let i = 0; i < count; i++) {
    //             particles[i] = new Particle();
    //         }
    //     }

    //     function draw() {
    //         ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);

    //         for (let i = 0; i < particles.length; i++) {
    //             particles[i].draw();
    //         }
    //     }

    //     function move() {
    //         for (let i = 0; i < particles.length; i++) {
    //             particles[i].move();
    //         }
    //     }

    //     function loop() {
    //         draw();
    //         move();
    //         requestAnimationFrame(loop);
    //     }

    //     createParticle(number);
    //     loop();

    // };

    window.addEventListener('load', init);

    function init(){
        // サイズを指定
      const width = 960;
      const height = 540;
      let rot = 0; // 角度

      var garray = [];

      // レンダラーを作成
      const renderer = new THREE.WebGLRenderer({
        alpha: true,
        canvas: document.querySelector('#myCanvas')
      });
      
      renderer.setClearAlpha(0);
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setSize(window.innerWidth, window.innerHeight);

      // シーンを作成
      const scene = new THREE.Scene();

      // カメラを作成
      const camera = new THREE.PerspectiveCamera(45, width / height);
    //   camera.position.set(0, 0, +1000);

            // 星屑を作成します (カメラの動きをわかりやすくするため)
      createParticle();
      function createParticle() {
        // 形状データを作成
        const geometry = new THREE.Geometry();
        // 配置する範囲
        const SIZE = window.innerWidth;
        // 配置する個数
        const LENGTH = 500;
        for (let i = 0; i < LENGTH; i++) {
          geometry.vertices.push(garray[i] = new THREE.Vector3(
            SIZE * (Math.random() - 0.5),
            SIZE * (Math.random() - 0.5),
            SIZE * (Math.random() - 0.5),
          ));
        }

        // マテリアルを作成
        const material = new THREE.PointsMaterial({
          // 一つ一つのサイズ
          size: 10,
          // 色
          color: 0xFFFFFF,
          opacity: 0.4,
          transparent: true,
        });
        // 物体を作成
        const mesh = new THREE.Points(geometry, material);
        scene.add(mesh);
      }
      
      function move () {
        for (let i = 0; i < garray.length; i++) {
            garray[i].x += garray[i].x;
            garray[i].y += garray[i].y;
            // garray[i].z += garray[i].z;
        }
      };

      tick();
      // 毎フレーム時に実行されるループイベントです
      function tick() {
        move ();
        rot += 0.3;
        // ラジアンに変換する
        const radian = rot * Math.PI / 180;
        // 角度に応じてカメラの位置を設定
        camera.position.x = 1000 * Math.sin(radian);
        camera.position.z = 1000 * Math.cos(radian);
        // 原点方向を見つめる
        camera.lookAt(new THREE.Vector3(0, 0, 0));
        // レンダリング
        renderer.render(scene, camera);
        requestAnimationFrame(tick);
      }
    
      // Particleを作成
    //   var geometry = new THREE.PlaneGeometry( 300, 300, 1 );
    //     var material = new THREE.MeshBasicMaterial( {color: 'white', opacity: 0.4, transparent: true, side: THREE.DoubleSide} );
    //     var plane = new THREE.Mesh( geometry, material );
    //     scene.add( plane );

    //   tick();

      // 毎フレーム時に実行されるループイベントです
    //   function tick() {
    //     plane.rotation.y += 0.01;
    //     plane.rotation.x += 0.01;
    //     renderer.render(scene, camera); // レンダリング

    //     requestAnimationFrame(tick);
    //   }
    }
    </script>
</body>
</html>